<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codes WiFi - FastNetLite</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block bg-dark sidebar collapse">
                <div class="position-sticky pt-3">
                    <div class="text-center mb-4">
                        <i class="fas fa-wifi fa-2x text-primary"></i>
                        <h5 class="text-white mt-2">FastNetLite</h5>
                    </div>
                    
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="dashboard.html">
                                <i class="fas fa-tachometer-alt"></i>
                                Tableau de bord
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="routers.html">
                                <i class="fas fa-network-wired"></i>
                                Mes Routeurs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="settings.html">
                                <i class="fas fa-cog"></i>
                                Paramètres
                            </a>
                        </li>
                        <li class="nav-item mt-5">
                            <a class="nav-link text-danger" href="#" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i>
                                Déconnexion
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
                <!-- Menu de navigation du routeur -->
                <div class="nav-scroller bg-body shadow-sm mb-4">
                    <nav class="nav nav-underline" aria-label="Navigation secondaire">
                        <a class="nav-link" href="router-dashboard.html" id="routerDashboardLink">
                            <i class="fas fa-tachometer-alt me-1"></i> Tableau de bord
                        </a>
                        <a class="nav-link active" href="wifi-codes.html" id="wifiCodesLink">
                            <i class="fas fa-key me-1"></i> Codes WiFi
                        </a>
                        <a class="nav-link" href="clients.html" id="clientsLink">
                            <i class="fas fa-users me-1"></i> Clients
                        </a>
                        <a class="nav-link" href="payments.html" id="paymentsLink">
                            <i class="fas fa-money-bill-wave me-1"></i> Paiements
                        </a>
                        <a class="nav-link" href="router-settings.html" id="routerSettingsLink">
                            <i class="fas fa-cog me-1"></i> Paramètres
                        </a>
                    </nav>
                </div>
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <div>
                        <h1 class="h2">Codes WiFi</h1>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="dashboard.html">Tableau de bord</a></li>
                                <li class="breadcrumb-item"><a href="routers.html">Routeurs</a></li>
                                <li class="breadcrumb-item active" aria-current="page"><span id="routerName">Routeur</span></li>
                            </ol>
                        </nav>
                    </div>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#importCodesModal">
                                <i class="fas fa-file-import me-1"></i> Importer des codes
                            </button>
                        </div>
                        <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#addProfileModal">
                            <i class="fas fa-plus me-1"></i> Ajouter un profil
                        </button>
                    </div>
                </div>
                
                <!-- Onglets -->
                <ul class="nav nav-tabs mb-4" id="wifiTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="profiles-tab" data-bs-toggle="tab" data-bs-target="#profiles" type="button" role="tab" aria-controls="profiles" aria-selected="true">
                            <i class="fas fa-tags me-1"></i> Profils WiFi
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="codes-tab" data-bs-toggle="tab" data-bs-target="#codes" type="button" role="tab" aria-controls="codes" aria-selected="false">
                            <i class="fas fa-key me-1"></i> Codes Disponibles
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="sold-codes-tab" data-bs-toggle="tab" data-bs-target="#sold-codes" type="button" role="tab" aria-controls="sold-codes" aria-selected="false">
                            <i class="fas fa-shopping-cart me-1"></i> Codes Vendus
                        </button>
                    </li>
                </ul>
                
                <!-- Contenu des onglets -->
                <div class="tab-content" id="wifiTabsContent">
                    <!-- Onglet Profils WiFi -->
                    <div class="tab-pane fade show active" id="profiles" role="tabpanel" aria-labelledby="profiles-tab">
                        <div class="row" id="profilesList">
                            <!-- Les profils seront chargés dynamiquement ici -->
                            <div class="col-12 text-center py-5" id="loadingProfiles">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Chargement...</span>
                                </div>
                                <p class="mt-2">Chargement des profils...</p>
                            </div>
                            
                            <div class="col-12 text-center py-5 d-none" id="noProfiles">
                                <i class="fas fa-tags fa-4x text-muted mb-3"></i>
                                <h4>Aucun profil trouvé</h4>
                                <p class="text-muted">Commencez par ajouter un profil pour gérer vos codes WiFi</p>
                                <button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#addProfileModal">
                                    <i class="fas fa-plus me-1"></i> Ajouter un profil
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Onglet Codes Disponibles -->
                    <div class="tab-pane fade" id="codes" role="tabpanel" aria-labelledby="codes-tab">
                        <!-- Filtres -->
                        <div class="row mb-4">
                            <div class="col-md-8">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" class="form-control" id="searchCodes" placeholder="Rechercher un code...">
                                    <button class="btn btn-outline-secondary" type="button" id="clearSearchBtn">Effacer</button>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" id="filterProfile">
                                    <option value="all">Tous les profils</option>
                                    <!-- Les profils seront chargés dynamiquement ici -->
                                </select>
                            </div>
                        </div>
                        
                        <!-- Tableau des codes disponibles -->
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover" id="codesTable">
                                        <thead>
                                            <tr>
                                                <th>Code</th>
                                                <th>Profil</th>
                                                <th>Date de création</th>
                                                <th>Prix</th>
                                                <th>Durée</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="codesList">
                                            <tr>
                                                <td colspan="6" class="text-center">
                                                    <div class="py-5" id="loadingCodes">
                                                        <div class="spinner-border text-primary" role="status">
                                                            <span class="visually-hidden">Chargement...</span>
                                                        </div>
                                                        <p class="mt-2">Chargement des codes...</p>
                                                    </div>
                                                    <div class="py-5 d-none" id="noCodes">
                                                        <i class="fas fa-key fa-3x text-muted mb-3"></i>
                                                        <p>Aucun code WiFi disponible trouvé</p>
                                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#importCodesModal">
                                                            <i class="fas fa-file-import me-1"></i> Importer des codes
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Pagination -->
                                <nav aria-label="Pagination des codes" class="d-flex justify-content-center mt-4">
                                    <ul class="pagination" id="codesPagination">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Précédent</a>
                                        </li>
                                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="#">Suivant</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Onglet Codes Vendus -->
                    <div class="tab-pane fade" id="sold-codes" role="tabpanel" aria-labelledby="sold-codes-tab">
                        <!-- Filtres pour les codes vendus -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" class="form-control" id="searchSoldCodes" placeholder="Rechercher un code ou un client...">
                                    <button class="btn btn-outline-secondary" type="button" id="clearSoldSearchBtn">Effacer</button>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="filterSoldProfile">
                                    <option value="all">Tous les profils</option>
                                    <!-- Les profils seront chargés dynamiquement ici -->
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="filterSoldPeriod">
                                    <option value="all">Toutes les périodes</option>
                                    <option value="today">Aujourd'hui</option>
                                    <option value="week">Cette semaine</option>
                                    <option value="month">Ce mois</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Tableau des codes vendus -->
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover" id="soldCodesTable">
                                        <thead>
                                            <tr>
                                                <th>Code</th>
                                                <th>Profil</th>
                                                <th>Client</th>
                                                <th>Date de vente</th>
                                                <th>Prix</th>
                                                <th>Paiement</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="soldCodesList">
                                            <tr>
                                                <td colspan="7" class="text-center">
                                                    <div class="py-5" id="loadingSoldCodes">
                                                        <div class="spinner-border text-primary" role="status">
                                                            <span class="visually-hidden">Chargement...</span>
                                                        </div>
                                                        <p class="mt-2">Chargement des codes vendus...</p>
                                                    </div>
                                                    <div class="py-5 d-none" id="noSoldCodes">
                                                        <i class="fas fa-shopping-cart fa-3x text-muted mb-3"></i>
                                                        <p>Aucun code WiFi vendu trouvé</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Pagination pour les codes vendus -->
                                <nav aria-label="Pagination des codes vendus" class="d-flex justify-content-center mt-4">
                                    <ul class="pagination" id="soldCodesPagination">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Précédent</a>
                                        </li>
                                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="#">Suivant</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                </div>
                
                <!-- Footer -->
                <footer class="pt-5 d-flex justify-content-between">
                    <span>Copyright 2025 <a href="#">FastNetLite</a></span>
                    <ul class="nav m-0">
                        <li class="nav-item">
                            <a class="nav-link text-secondary" href="#">Confidentialité</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-secondary" href="#">Conditions</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-secondary" href="#">Support</a>
                        </li>
                    </ul>
                </footer>
            </main>
        </div>
    </div>
    
    <!-- Modal d'ajout de profil -->
    <div class="modal fade" id="addProfileModal" tabindex="-1" aria-labelledby="addProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addProfileModalLabel">Ajouter un profil WiFi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addProfileForm">
                        <div class="alert alert-danger d-none" id="profileFormError"></div>
                        
                        <div class="mb-3">
                            <label for="profileName" class="form-label">Nom du profil</label>
                            <input type="text" class="form-control" id="profileName" required>
                            <div class="form-text">Nom du forfait (ex: 1 heure, 24 heures, etc.)</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="profileDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="profileDescription" rows="2"></textarea>
                            <div class="form-text">Description optionnelle du forfait</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="profileDuration" class="form-label">Durée</label>
                            <input type="text" class="form-control" id="profileDuration" required>
                            <div class="form-text">Format: 1h, 24h, 7d, etc.</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="profilePrice" class="form-label">Prix</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="profilePrice" required>
                                <span class="input-group-text">FCFA</span>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="saveProfileBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="saveProfileSpinner" role="status" aria-hidden="true"></span>
                        Enregistrer
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal d'édition de profil -->
    <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editProfileModalLabel">Modifier le profil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editProfileForm">
                        <input type="hidden" id="editProfileId">
                        <div class="alert alert-danger d-none" id="editProfileFormError"></div>
                        <div class="mb-3">
                            <label for="editProfileName" class="form-label">Nom du profil</label>
                            <input type="text" class="form-control" id="editProfileName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editProfileDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="editProfileDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="editProfileDuration" class="form-label">Durée</label>
                            <input type="text" class="form-control" id="editProfileDuration" required>
                            <div class="form-text">Exemple: 1 jour, 7 jours, 30 jours, etc.</div>
                        </div>
                        <div class="mb-3">
                            <label for="editProfilePrice" class="form-label">Prix (FCFA)</label>
                            <input type="number" class="form-control" id="editProfilePrice" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="saveEditProfileBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="editProfileSpinner" role="status" aria-hidden="true"></span>
                        Enregistrer les modifications
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal d'importation de codes -->
    <div class="modal fade" id="importCodesModal" tabindex="-1" aria-labelledby="importCodesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="importCodesModalLabel">Importer des codes WiFi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i> Vous pouvez importer des codes WiFi générés depuis votre système Mikhmon/Userman ou depuis un fichier PDF.
                    </div>
                    
                    <div class="alert alert-danger d-none" id="importFormError"></div>
                    <div class="alert alert-success d-none" id="importFormSuccess"></div>
                    <div class="alert alert-success d-none" id="importSuccess"></div>
                    
                    <form id="importCodesForm">
                        <div class="mb-3">
                            <label for="importProfile" class="form-label">Profil WiFi</label>
                            <select class="form-select" id="importProfile" required>
                                <option value="">Sélectionnez un profil</option>
                                <!-- Les profils seront chargés dynamiquement ici -->
                            </select>
                            <div class="form-text">Sélectionnez le profil auquel associer les codes importés</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="importMethod" class="form-label">Méthode d'importation</label>
                            <select class="form-select" id="importMethod">
                                <option value="csv">Fichier CSV</option>
                                <option value="text">Texte brut</option>
                                <option value="pdf">Fichier PDF</option>
                            </select>
                        </div>
                        
                        <!-- Import CSV -->
                        <div id="csvImport">
                            <div class="mb-3">
                                <label for="csvFile" class="form-label">Fichier CSV</label>
                                <input type="file" class="form-control" id="csvFile" accept=".csv">
                                <div class="form-text">Le fichier CSV doit contenir une colonne pour les codes</div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="csvDelimiter" class="form-label">Délimiteur</label>
                                <select class="form-select" id="csvDelimiter">
                                    <option value=",">Virgule (,)</option>
                                    <option value=";">Point-virgule (;)</option>
                                    <option value="\t">Tabulation</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label for="csvCodeColumn" class="form-label">Colonne des codes</label>
                                <select class="form-select" id="csvCodeColumn">
                                    <option value="0">Première colonne</option>
                                    <option value="1">Deuxième colonne</option>
                                    <option value="2">Troisième colonne</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Import texte -->
                        <div id="textImport" class="d-none">
                            <div class="mb-3">
                                <label for="textCodes" class="form-label">Codes (un par ligne)</label>
                                <textarea class="form-control" id="textCodes" rows="10" placeholder="Collez vos codes ici, un par ligne"></textarea>
                            </div>
                        </div>
                        
                        <!-- Import PDF -->
                        <div id="pdfImport" class="d-none">
                            <div class="mb-3">
                                <label for="pdfFile" class="form-label">Fichier PDF</label>
                                <input type="file" class="form-control" id="pdfFile" accept=".pdf">
                                <div class="form-text">Sélectionnez le fichier PDF contenant les codes WiFi</div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Format du code</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="codeFormat" id="formatVoucher" value="voucher" checked>
                                    <label class="form-check-label" for="formatVoucher">
                                        Voucher (code unique)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="codeFormat" id="formatUserPass" value="userpass">
                                    <label class="form-check-label" for="formatUserPass">
                                        Utilisateur / Mot de passe
                                    </label>
                                </div>
                            </div>
                            
                            <div id="voucherExample" class="mb-3">
                                <label for="exampleVoucher" class="form-label">Exemple de code</label>
                                <input type="text" class="form-control" id="exampleVoucher" placeholder="Ex: ABC123">
                                <div class="form-text">Entrez un exemple de code pour aider à la reconnaissance</div>
                            </div>
                            
                            <div id="userPassExample" class="mb-3 d-none">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="exampleUser" class="form-label">Exemple d'utilisateur</label>
                                        <input type="text" class="form-control" id="exampleUser" placeholder="Ex: user123">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="examplePass" class="form-label">Exemple de mot de passe</label>
                                        <input type="text" class="form-control" id="examplePass" placeholder="Ex: pass456">
                                    </div>
                                </div>
                                <div class="form-text">Entrez un exemple d'utilisateur et de mot de passe pour aider à la reconnaissance</div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Pattern détecté</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-code"></i></span>
                                    <input type="text" class="form-control" id="detectedPattern" readonly>
                                </div>
                                <div class="form-text" id="patternExplanation">Entrez un exemple pour générer automatiquement un pattern</div>
                            </div>
                            
                            <div class="mb-3 d-none" id="extractedCodesContainer">
                                <label class="form-label">Codes extraits <span class="badge bg-primary" id="extractedCodesCount">0</span></label>
                                <div class="card">
                                    <div class="card-body">
                                        <div class="table-responsive" style="max-height: 200px; overflow-y: auto;">
                                            <table class="table table-sm" id="extractedCodesTable">
                                                <thead>
                                                    <tr id="extractedCodesHeader">
                                                        <th>Code</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="extractedCodesList">
                                                    <!-- Les codes extraits seront affichés ici -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="importCodesBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="importCodesSpinner" role="status" aria-hidden="true"></span>
                        Importer
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de détails d'un code -->
    <div class="modal fade" id="codeDetailsModal" tabindex="-1" aria-labelledby="codeDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="codeDetailsModalLabel">Détails du code</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <div class="badge bg-success p-3 mb-3" id="codeValue">WIFI-1234</div>
                        <div class="badge bg-primary" id="codeStatus">Disponible</div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Profil</label>
                            <div id="codeProfile">1 heure</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Prix</label>
                            <div id="codePrice">500 FCFA</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Date de création</label>
                            <div id="codeCreatedAt">01/01/2025</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Date d'utilisation</label>
                            <div id="codeUsedAt">-</div>
                        </div>
                        <div class="col-12 mb-3">
                            <label class="form-label fw-bold">Client</label>
                            <div id="codeClient">-</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                    <button type="button" class="btn btn-danger d-none" id="deleteCodeBtn">
                        <i class="fas fa-trash me-1"></i> Supprimer
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Template pour la carte d'un profil -->
    <template id="profileCardTemplate">
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="card-title profile-name"></h5>
                        <span class="badge bg-primary profile-price"></span>
                    </div>
                    <p class="card-text profile-description text-muted"></p>
                    <div class="row mb-3">
                        <div class="col-6">
                            <div class="small text-muted">Durée</div>
                            <div class="fw-bold profile-duration"></div>
                        </div>
                        <div class="col-6">
                            <div class="small text-muted">Codes disponibles</div>
                            <div class="fw-bold profile-codes-count">0</div>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <div class="d-flex justify-content-between mb-2">
                        <button type="button" class="btn btn-sm btn-primary import-codes-btn" data-bs-toggle="modal" data-bs-target="#importCodesModal">
                            <i class="fas fa-file-import me-1"></i> Importer des codes
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-primary copy-buy-link-btn">
                            <i class="fas fa-link me-1"></i> Copier lien d'achat
                        </button>
                    </div>
                    <div class="d-flex justify-content-end">
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item edit-profile-btn" href="#"><i class="fas fa-edit me-1"></i> Modifier</a></li>
                                <li><a class="dropdown-item view-codes-btn" href="#"><i class="fas fa-key me-1"></i> Voir les codes</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item text-danger delete-profile-btn" href="#"><i class="fas fa-trash me-1"></i> Supprimer</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- Message de succès global pour les actions sur les profils -->
    <div class="alert alert-success d-none position-fixed top-0 start-50 translate-middle-x mt-3" id="profilesSuccess" style="z-index: 1050;"></div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bundle principal contenant tout le code JavaScript -->
    <script src="wifi-codes.bundle.js"></script>
    <!-- Tous les scripts personnalisés sont maintenant dans le bundle principal -->
</body>
</html>
