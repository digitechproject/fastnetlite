<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de bord Routeur - FastNetLite</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Chart.js -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block bg-dark sidebar collapse">
                <div class="position-sticky pt-3">
                    <div class="text-center mb-4">
                        <i class="fas fa-wifi fa-2x text-primary"></i>
                        <h5 class="text-white mt-2">FastNetLite</h5>
                    </div>
                    
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="dashboard.html">
                                <i class="fas fa-tachometer-alt"></i>
                                Tableau de bord
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="routers.html">
                                <i class="fas fa-network-wired"></i>
                                Mes Routeurs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="settings.html">
                                <i class="fas fa-cog"></i>
                                Paramètres
                            </a>
                        </li>
                        <li class="nav-item mt-5">
                            <a class="nav-link text-danger" href="#" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i>
                                Déconnexion
                            </a>
                        </li>
                    </ul>
                    
                    <hr class="text-white-50 my-4">
                    
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>Navigation routeur</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" id="routerDashboardLink">
                                <i class="fas fa-tachometer-alt"></i>
                                Tableau de bord
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="routerWifiCodesLink">
                                <i class="fas fa-key"></i>
                                Codes WiFi
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="routerClientsLink">
                                <i class="fas fa-users"></i>
                                Clients
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="routerPaymentsLink">
                                <i class="fas fa-money-bill-wave"></i>
                                Paiements
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="routerSettingsLink">
                                <i class="fas fa-cog"></i>
                                Paramètres
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <div>
                        <h1 class="h2" id="routerName">Routeur</h1>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="dashboard.html">Tableau de bord</a></li>
                                <li class="breadcrumb-item"><a href="routers.html">Routeurs</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Tableau de bord</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <a href="#" class="btn btn-sm btn-outline-secondary" id="buyPageLink" target="_blank">
                                <i class="fas fa-external-link-alt me-1"></i> Page d'achat
                            </a>
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="refreshStatsBtn">
                                <i class="fas fa-sync-alt me-1"></i> Actualiser
                            </button>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-primary dropdown-toggle" type="button" id="actionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-plus me-1"></i> Actions
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="actionsDropdown">
                                <li><a class="dropdown-item" href="#" id="addProfileBtn"><i class="fas fa-tags me-1"></i> Ajouter un profil</a></li>
                                <li><a class="dropdown-item" href="#" id="importCodesBtn"><i class="fas fa-file-import me-1"></i> Importer des codes</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" id="routerSettingsBtn"><i class="fas fa-cog me-1"></i> Paramètres du routeur</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Résumé des statistiques -->
                <div class="row">
                    <div class="col-md-3 mb-4">
                        <div class="card card-stats bg-primary text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-title">Codes disponibles</h6>
                                        <h2 class="card-text" id="availableCodesCount">0</h2>
                                    </div>
                                    <i class="fas fa-key fa-3x opacity-50"></i>
                                </div>
                            </div>
                            <div class="card-footer d-flex justify-content-between align-items-center">
                                <a href="#" class="text-white text-decoration-none" id="viewCodesLink">Voir détails</a>
                                <i class="fas fa-arrow-circle-right"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card card-stats bg-success text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-title">Codes vendus</h6>
                                        <h2 class="card-text" id="soldCodesCount">0</h2>
                                    </div>
                                    <i class="fas fa-shopping-cart fa-3x opacity-50"></i>
                                </div>
                            </div>
                            <div class="card-footer d-flex justify-content-between align-items-center">
                                <span>Voir détails</span>
                                <i class="fas fa-arrow-circle-right"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card card-stats bg-warning text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-title">Clients</h6>
                                        <h2 class="card-text" id="clientsCount">0</h2>
                                    </div>
                                    <i class="fas fa-users fa-3x opacity-50"></i>
                                </div>
                            </div>
                            <div class="card-footer d-flex justify-content-between align-items-center">
                                <span>Voir détails</span>
                                <i class="fas fa-arrow-circle-right"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card card-stats bg-info text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-title">Revenus</h6>
                                        <h2 class="card-text" id="revenueAmount">0 FCFA</h2>
                                    </div>
                                    <i class="fas fa-money-bill-wave fa-3x opacity-50"></i>
                                </div>
                            </div>
                            <div class="card-footer d-flex justify-content-between align-items-center">
                                <span>Voir détails</span>
                                <i class="fas fa-arrow-circle-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Graphiques et activité récente -->
                <div class="row">
                    <!-- Graphique des ventes -->
                    <div class="col-md-8 mb-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Ventes récentes</h5>
                                <div class="btn-group btn-group-sm">
                                    <button type="button" class="btn btn-outline-secondary active" data-period="week">7 jours</button>
                                    <button type="button" class="btn btn-outline-secondary" data-period="month">30 jours</button>
                                    <button type="button" class="btn btn-outline-secondary" data-period="year">Année</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="text-center py-3 d-none" id="chartLoader">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Chargement...</span>
                                    </div>
                                </div>
                                <canvas id="salesChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Activité récente -->
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Activité récente</h5>
                            </div>
                            <div class="card-body p-0">
                                <ul class="list-group list-group-flush" id="recentActivity">
                                    <li class="list-group-item text-center py-5">
                                        <div class="spinner-border text-primary" role="status" id="activityLoader">
                                            <span class="visually-hidden">Chargement...</span>
                                        </div>
                                        <div class="text-muted d-none" id="noActivityMessage">Aucune activité récente</div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Profils WiFi -->
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Profils WiFi</h5>
                                <button type="button" class="btn btn-primary btn-sm" id="addProfileBtnCard">
                                    <i class="fas fa-plus me-1"></i> Ajouter un profil
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="col-12 d-none" id="profilesLoadError">
                                    <!-- Les erreurs de chargement des profils seront affichées ici -->
                                </div>
                                
                                <div class="row" id="profilesList">
                                    <!-- Les profils seront chargés dynamiquement ici -->
                                    <div class="col-12 text-center py-5" id="loadingProfiles">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Chargement...</span>
                                        </div>
                                        <p class="mt-2">Chargement des profils...</p>
                                    </div>
                                    
                                    <div class="col-12 text-center py-5 d-none" id="noProfiles">
                                        <i class="fas fa-tags fa-4x text-muted mb-3"></i>
                                        <h4>Aucun profil trouvé</h4>
                                        <p class="text-muted">Commencez par ajouter un profil pour gérer vos codes WiFi</p>
                                        <button type="button" class="btn btn-primary mt-3" id="addProfileBtnEmpty">
                                            <i class="fas fa-plus me-1"></i> Ajouter un profil
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Dernières ventes -->
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Dernières ventes</h5>
                                <a href="#" class="btn btn-outline-primary btn-sm" id="viewAllSalesBtn">
                                    Voir tout
                                </a>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Client</th>
                                                <th>Profil</th>
                                                <th>Code</th>
                                                <th>Montant</th>
                                                <th>Statut</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentSales">
                                            <tr>
                                                <td colspan="6" class="text-center py-5" id="loadingSales">
                                                    <div class="spinner-border text-primary" role="status">
                                                        <span class="visually-hidden">Chargement...</span>
                                                    </div>
                                                    <p class="mt-2">Chargement des ventes...</p>
                                                </td>
                                            </tr>
                                            <tr class="d-none" id="noSalesMessage">
                                                <td colspan="6" class="text-center py-5">
                                                    <i class="fas fa-shopping-cart fa-3x text-muted mb-3"></i>
                                                    <h4>Aucune vente trouvée</h4>
                                                    <p class="text-muted">Les ventes apparaîtront ici une fois que des clients auront acheté des codes</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Footer -->
                <footer class="pt-5 d-flex justify-content-between">
                    <span>Copyright © 2025 <a href="#">FastNetLite</a></span>
                    <ul class="nav m-0">
                        <li class="nav-item">
                            <a class="nav-link text-secondary" href="#">Confidentialité</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-secondary" href="#">Conditions</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-secondary" href="#">Support</a>
                        </li>
                    </ul>
                </footer>
            </main>
        </div>
    </div>
    
    <!-- Modal d'ajout de profil -->
    <div class="modal fade" id="addProfileModal" tabindex="-1" aria-labelledby="addProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addProfileModalLabel">Ajouter un profil WiFi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addProfileForm">
                        <div class="alert alert-danger d-none" id="profileFormError"></div>
                        
                        <div class="mb-3">
                            <label for="profileName" class="form-label">Nom du profil</label>
                            <input type="text" class="form-control" id="profileName" required>
                            <div class="form-text">Nom du forfait (ex: 1 heure, 24 heures, etc.)</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="profileDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="profileDescription" rows="2"></textarea>
                            <div class="form-text">Description optionnelle du forfait</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="profileDuration" class="form-label">Durée</label>
                            <input type="text" class="form-control" id="profileDuration" required>
                            <div class="form-text">Format: 1h, 24h, 7d, etc.</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="profilePrice" class="form-label">Prix</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="profilePrice" required>
                                <span class="input-group-text">FCFA</span>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="saveProfileBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="saveProfileSpinner" role="status" aria-hidden="true"></span>
                        Enregistrer
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal d'importation de codes -->
    <div class="modal fade" id="importCodesModal" tabindex="-1" aria-labelledby="importCodesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="importCodesModalLabel">Importer des codes WiFi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i> Vous pouvez importer des codes WiFi générés depuis votre système Mikhmon/Userman.
                    </div>
                    
                    <div class="alert alert-danger d-none" id="importFormError"></div>
                    
                    <form id="importCodesForm">
                        <div class="mb-3">
                            <label for="importProfile" class="form-label">Profil WiFi</label>
                            <select class="form-select" id="importProfile" required>
                                <option value="">Sélectionnez un profil</option>
                                <!-- Les profils seront chargés dynamiquement ici -->
                            </select>
                            <div class="form-text">Sélectionnez le profil auquel associer les codes importés</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="importMethod" class="form-label">Méthode d'importation</label>
                            <select class="form-select" id="importMethod">
                                <option value="csv">Fichier CSV</option>
                                <option value="text">Texte brut</option>
                            </select>
                        </div>
                        
                        <!-- Import CSV -->
                        <div id="csvImport">
                            <div class="mb-3">
                                <label for="csvFile" class="form-label">Fichier CSV</label>
                                <input type="file" class="form-control" id="csvFile" accept=".csv">
                                <div class="form-text">Le fichier CSV doit contenir une colonne pour les codes</div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="csvDelimiter" class="form-label">Délimiteur</label>
                                <select class="form-select" id="csvDelimiter">
                                    <option value=",">Virgule (,)</option>
                                    <option value=";">Point-virgule (;)</option>
                                    <option value="\t">Tabulation</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label for="csvCodeColumn" class="form-label">Colonne des codes</label>
                                <select class="form-select" id="csvCodeColumn">
                                    <option value="0">Première colonne</option>
                                    <option value="1">Deuxième colonne</option>
                                    <option value="2">Troisième colonne</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Import texte -->
                        <div id="textImport" class="d-none">
                            <div class="mb-3">
                                <label for="textCodes" class="form-label">Codes (un par ligne)</label>
                                <textarea class="form-control" id="textCodes" rows="10" placeholder="Collez vos codes ici, un par ligne"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="importCodesBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="importCodesSpinner" role="status" aria-hidden="true"></span>
                        Importer
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Template pour la carte d'un profil -->
    <template id="profileCardTemplate">
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="card-title profile-name"></h5>
                        <span class="badge bg-primary profile-price"></span>
                    </div>
                    <p class="card-text profile-description text-muted"></p>
                    <div class="row mb-3">
                        <div class="col-6">
                            <div class="small text-muted">Durée</div>
                            <div class="fw-bold profile-duration"></div>
                        </div>
                        <div class="col-6">
                            <div class="small text-muted">Codes disponibles</div>
                            <div class="fw-bold profile-codes-count">0</div>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <div class="d-flex justify-content-between">
                        <button type="button" class="btn btn-sm btn-primary import-codes-btn">
                            <i class="fas fa-file-import me-1"></i> Importer des codes
                        </button>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item edit-profile-btn" href="#"><i class="fas fa-edit me-1"></i> Modifier</a></li>
                                <li><a class="dropdown-item view-codes-btn" href="#"><i class="fas fa-key me-1"></i> Voir les codes</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item text-danger delete-profile-btn" href="#"><i class="fas fa-trash me-1"></i> Supprimer</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- Template pour une activité récente -->
    <template id="activityItemTemplate">
        <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <strong class="activity-title"></strong>
                    <div class="text-muted small activity-time"></div>
                </div>
                <div>
                    <span class="badge activity-badge"></span>
                </div>
            </div>
        </li>
    </template>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    
    <!-- Bundle principal contenant tout le code JavaScript -->
    <script src="router-dashboard.bundle.js"></script>
    <!-- Tous les scripts personnalisés sont maintenant dans le bundle principal -->
</body>
</html>


